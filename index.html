<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Destination | AI Travel Planner</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        brand: {
                            dark: '#0f172a',
                            accent: '#3b82f6',
                            highlight: '#f43f5e'
                        }
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom scrollbar for clean look */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1; 
        }
        ::-webkit-scrollbar-thumb {
            background: #cbd5e1; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8; 
        }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .activity-card {
            transition: all 0.3s ease;
        }
        .activity-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        .hidden-input {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
        }
        .hidden-input.show {
            max-height: 100px;
            opacity: 1;
            margin-top: 0.75rem;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 antialiased min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="bg-brand-dark text-white p-4 sticky top-0 z-50 shadow-lg">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i class="fas fa-globe-americas text-brand-accent text-2xl"></i>
                <h1 class="text-2xl font-bold font-serif tracking-wide">Ultimate Destination</h1>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-medium">
                <a href="#" class="hover:text-brand-accent transition">My Trips</a>
                <a href="#" class="hover:text-brand-accent transition">Community</a>
                <a href="#" class="hover:text-brand-accent transition">Account</a>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow">
        
        <!-- Hero / Input Section -->
        <section id="input-section" class="relative bg-brand-dark py-16 md:py-24 overflow-hidden">
            <!-- Background Image overlay -->
            <div class="absolute inset-0 opacity-30">
                <img src="https://images.unsplash.com/photo-1469854523086-cc02fe5d8800?ixlib=rb-4.0.3&auto=format&fit=crop&w=2021&q=80" alt="Travel" class="w-full h-full object-cover">
            </div>
            
            <div class="relative max-w-5xl mx-auto px-4 text-center">
                <h2 class="text-4xl md:text-6xl font-serif text-white mb-6 font-bold leading-tight">
                    Your Dream Vacation, <br><span class="text-brand-accent">AI Generated.</span>
                </h2>
                <p class="text-slate-300 text-lg mb-10 max-w-2xl mx-auto">
                    Tell us where you want to go, who you're with, and when. Our engine builds a personalized itinerary with live details.
                </p>

                <!-- Configuration Form -->
                <div class="glass-panel rounded-2xl p-6 md:p-8 text-left shadow-2xl max-w-4xl mx-auto transform transition-all">
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6">
                        
                        <!-- Destination -->
                        <div class="md:col-span-2">
                            <label class="block text-sm font-bold text-slate-700 mb-2">Destination</label>
                            <div class="relative">
                                <i class="fas fa-map-marker-alt absolute left-3 top-3 text-slate-400"></i>
                                <select id="destination" onchange="toggleCustomDest()" class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:ring-2 focus:ring-brand-accent focus:border-transparent bg-white appearance-none cursor-pointer">
                                    <optgroup label="United States">
                                        <option value="new-york">New York City, NY</option>
                                        <option value="los-angeles">Los Angeles, CA</option>
                                        <option value="chicago">Chicago, IL</option>
                                        <option value="miami">Miami, FL</option>
                                        <option value="san-francisco">San Francisco, CA</option>
                                        <option value="las-vegas">Las Vegas, NV</option>
                                        <option value="honolulu">Honolulu, HI</option>
                                    </optgroup>
                                    <optgroup label="International">
                                        <option value="toronto">Toronto, Canada</option>
                                        <option value="paris">Paris, France</option>
                                        <option value="london">London, UK</option>
                                        <option value="berlin">Berlin, Germany</option>
                                        <option value="tokyo">Tokyo, Japan</option>
                                        <option value="seoul">Seoul, South Korea</option>
                                        <option value="rome">Rome, Italy</option>
                                        <option value="barcelona">Barcelona, Spain</option>
                                        <option value="amsterdam">Amsterdam, Netherlands</option>
                                        <option value="sydney">Sydney, Australia</option>
                                        <option value="bangkok">Bangkok, Thailand</option>
                                        <option value="dubai">Dubai, UAE</option>
                                        <option value="rio">Rio de Janeiro, Brazil</option>
                                        <option value="capetown">Cape Town, South Africa</option>
                                    </optgroup>
                                    <option value="custom">Other / Custom Location...</option>
                                </select>
                            </div>
                            <div id="custom-dest-container" class="hidden-input">
                                <input type="text" id="custom-dest-val" placeholder="Enter City Name (e.g. Rio de Janeiro)" class="w-full px-4 py-2 rounded-lg border border-slate-200 focus:ring-2 focus:ring-brand-accent focus:border-transparent bg-slate-50">
                            </div>
                        </div>

                        <!-- Start Date -->
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-2">Start Date</label>
                            <div class="relative">
                                <input type="date" id="start-date" class="w-full px-4 py-3 rounded-lg border border-slate-200 focus:ring-2 focus:ring-brand-accent focus:border-transparent bg-white text-slate-700">
                            </div>
                        </div>

                        <!-- Duration (Number Input) -->
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-2">Days (1-14)</label>
                            <div class="relative">
                                <i class="fas fa-calendar-day absolute left-3 top-3 text-slate-400"></i>
                                <input type="number" id="duration" min="1" max="14" value="3" class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:ring-2 focus:ring-brand-accent focus:border-transparent bg-white text-slate-700">
                            </div>
                        </div>

                        <!-- Travelers (Number Input) -->
                        <div>
                            <label class="block text-sm font-bold text-slate-700 mb-2">Travelers</label>
                            <div class="relative">
                                <i class="fas fa-users absolute left-3 top-3 text-slate-400"></i>
                                <input type="number" id="travelers" min="1" max="20" value="2" class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:ring-2 focus:ring-brand-accent focus:border-transparent bg-white text-slate-700">
                            </div>
                        </div>

                        <!-- Group Type -->
                        <div class="md:col-span-2">
                            <label class="block text-sm font-bold text-slate-700 mb-2">Group Type</label>
                            <div class="relative">
                                <i class="fas fa-user-tag absolute left-3 top-3 text-slate-400"></i>
                                <select id="age-group" class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:ring-2 focus:ring-brand-accent focus:border-transparent bg-white appearance-none cursor-pointer">
                                    <option value="family">Family - Safe & Fun</option>
                                    <option value="teen">Teens - Action & Insta-worthy</option>
                                    <option value="young-adult">Young Adults - Trendy & Active</option>
                                </select>
                            </div>
                        </div>

                        <!-- Budget -->
                        <div class="md:col-span-2">
                            <label class="block text-sm font-bold text-slate-700 mb-2">Budget</label>
                            <div class="relative">
                                <i class="fas fa-tag absolute left-3 top-3 text-slate-400"></i>
                                <select id="budget" class="w-full pl-10 pr-4 py-3 rounded-lg border border-slate-200 focus:ring-2 focus:ring-brand-accent focus:border-transparent bg-white appearance-none cursor-pointer">
                                    <option value="economy">Economy ($)</option>
                                    <option value="standard" selected>Standard ($$)</option>
                                    <option value="luxury">Luxury ($$$)</option>
                                </select>
                            </div>
                        </div>

                    </div>

                    <!-- Interests -->
                    <div class="mb-8">
                        <label class="block text-sm font-bold text-slate-700 mb-3">Interests (Select at least one)</label>
                        <div class="flex flex-wrap gap-3">
                            <label class="cursor-pointer select-none">
                                <input type="checkbox" name="interest" value="culture" checked class="peer sr-only">
                                <div class="px-4 py-2 rounded-full border border-slate-300 text-slate-600 peer-checked:bg-brand-accent peer-checked:text-white peer-checked:border-brand-accent transition hover:bg-slate-50 peer-checked:hover:bg-blue-600">
                                    <i class="fas fa-landmark mr-1"></i> Culture
                                </div>
                            </label>
                            <label class="cursor-pointer select-none">
                                <input type="checkbox" name="interest" value="history" class="peer sr-only">
                                <div class="px-4 py-2 rounded-full border border-slate-300 text-slate-600 peer-checked:bg-amber-600 peer-checked:text-white peer-checked:border-amber-600 transition hover:bg-slate-50 peer-checked:hover:bg-amber-700">
                                    <i class="fas fa-scroll mr-1"></i> History
                                </div>
                            </label>
                            <label class="cursor-pointer select-none">
                                <input type="checkbox" name="interest" value="food" checked class="peer sr-only">
                                <div class="px-4 py-2 rounded-full border border-slate-300 text-slate-600 peer-checked:bg-emerald-500 peer-checked:text-white peer-checked:border-emerald-500 transition hover:bg-slate-50 peer-checked:hover:bg-emerald-600">
                                    <i class="fas fa-utensils mr-1"></i> Food
                                </div>
                            </label>
                            <label class="cursor-pointer select-none">
                                <input type="checkbox" name="interest" value="sports" class="peer sr-only">
                                <div class="px-4 py-2 rounded-full border border-slate-300 text-slate-600 peer-checked:bg-brand-highlight peer-checked:text-white peer-checked:border-brand-highlight transition hover:bg-slate-50 peer-checked:hover:bg-rose-600">
                                    <i class="fas fa-basketball-ball mr-1"></i> Sports
                                </div>
                            </label>
                            <label class="cursor-pointer select-none">
                                <input type="checkbox" name="interest" value="nature" class="peer sr-only">
                                <div class="px-4 py-2 rounded-full border border-slate-300 text-slate-600 peer-checked:bg-teal-500 peer-checked:text-white peer-checked:border-teal-500 transition hover:bg-slate-50 peer-checked:hover:bg-teal-600">
                                    <i class="fas fa-leaf mr-1"></i> Nature
                                </div>
                            </label>
                            <label class="cursor-pointer select-none">
                                <input type="checkbox" name="interest" value="shopping" class="peer sr-only">
                                <div class="px-4 py-2 rounded-full border border-slate-300 text-slate-600 peer-checked:bg-pink-500 peer-checked:text-white peer-checked:border-pink-500 transition hover:bg-slate-50 peer-checked:hover:bg-pink-600">
                                    <i class="fas fa-shopping-bag mr-1"></i> Shopping
                                </div>
                            </label>
                            <label class="cursor-pointer select-none">
                                <input type="checkbox" name="interest" value="adventure" class="peer sr-only">
                                <div class="px-4 py-2 rounded-full border border-slate-300 text-slate-600 peer-checked:bg-orange-500 peer-checked:text-white peer-checked:border-orange-500 transition hover:bg-slate-50 peer-checked:hover:bg-orange-600">
                                    <i class="fas fa-hiking mr-1"></i> Adventure
                                </div>
                            </label>
                             <label class="cursor-pointer select-none">
                                <input type="checkbox" name="interest" value="relaxation" class="peer sr-only">
                                <div class="px-4 py-2 rounded-full border border-slate-300 text-slate-600 peer-checked:bg-cyan-500 peer-checked:text-white peer-checked:border-cyan-500 transition hover:bg-slate-50 peer-checked:hover:bg-cyan-600">
                                    <i class="fas fa-spa mr-1"></i> Relaxation
                                </div>
                            </label>
                            <!-- Custom Interest -->
                            <label class="cursor-pointer select-none">
                                <input type="checkbox" id="custom-interest-check" onchange="toggleCustomInterest()" class="peer sr-only">
                                <div class="px-4 py-2 rounded-full border border-slate-300 text-slate-600 peer-checked:bg-purple-500 peer-checked:text-white peer-checked:border-purple-500 transition hover:bg-slate-50 peer-checked:hover:bg-purple-600">
                                    <i class="fas fa-plus mr-1"></i> Specific Interest?
                                </div>
                            </label>
                        </div>
                        
                        <div id="custom-interest-container" class="hidden-input">
                            <input type="text" id="custom-interest-val" placeholder="Enter Interest (e.g. Anime, Architecture)" class="w-full px-4 py-2 rounded-lg border border-slate-200 focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-slate-50">
                        </div>
                    </div>

                    <button onclick="generateItinerary()" class="w-full bg-brand-dark hover:bg-slate-800 text-white font-bold py-4 rounded-xl shadow-lg transition transform active:scale-95 flex justify-center items-center gap-2 text-lg">
                        <i class="fas fa-magic"></i> Generate My Itinerary
                    </button>
                </div>
            </div>
        </section>

        <!-- Loading View -->
        <section id="loading-view" class="hidden py-24 text-center">
            <div class="flex flex-col items-center justify-center">
                <div class="loader mb-6"></div>
                <h3 class="text-2xl font-bold text-slate-700 mb-2">Building your dream trip...</h3>
                <p class="text-slate-500" id="loading-text">Checking official ticket availability...</p>
            </div>
        </section>

        <!-- Results View -->
        <section id="results-view" class="hidden max-w-6xl mx-auto px-4 py-12">
            <div class="flex flex-col md:flex-row justify-between items-end mb-10 border-b border-slate-200 pb-6">
                <div>
                    <div class="text-sm font-bold text-brand-accent uppercase tracking-wider mb-1">Your Personal Plan</div>
                    <h2 class="text-4xl font-serif font-bold text-slate-800" id="result-title">Trip to Paris</h2>
                    <p class="text-slate-500 mt-2" id="result-subtitle">5 Days • Food & Culture Focus</p>
                </div>
                <button onclick="resetApp()" class="mt-4 md:mt-0 px-6 py-2 bg-white border border-slate-300 rounded-lg text-slate-600 hover:bg-slate-50 hover:text-brand-dark transition shadow-sm text-sm font-bold">
                    <i class="fas fa-redo-alt mr-2"></i> Start Over
                </button>
            </div>
            <div id="itinerary-container" class="space-y-12"></div>
        </section>
    </main>

    <footer class="bg-white border-t border-slate-200 py-8 text-center text-slate-400 text-sm">
        <p>&copy; 2025 Ultimate Destination. Pricing and availability subject to change.</p>
    </footer>

    <script>
        // --- DATA MOCKUP ---
        const getRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];
        
        const shuffle = (array) => {
            let currentIndex = array.length, randomIndex;
            while (currentIndex != 0) {
                randomIndex = Math.floor(Math.random() * currentIndex);
                currentIndex--;
                [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];
            }
            return array;
        }

        // --- EXPANDED DATA POOL (NIGHTLIFE REMOVED) ---
        const db = {
            "new-york": {
                name: "New York City",
                teams: [{ home: "NY Knicks", venue: "MSG", league: "NBA" }, { home: "NY Rangers", venue: "MSG", league: "NHL" }, { home: "NY Yankees", venue: "Yankee Stadium", league: "MLB" }, { home: "Brooklyn Nets", venue: "Barclays Center", league: "NBA" }],
                activities: {
                    culture: [
                        { name: "The Met", cost: "$30", hours: "10am-5pm", link: "https://www.metmuseum.org/", desc: "World-class art collection." },
                        { name: "Guggenheim Museum", cost: "$25", hours: "11am-6pm", link: "https://www.guggenheim.org/", desc: "Architectural masterpiece." },
                        { name: "MoMA", cost: "$25", hours: "10:30am-5:30pm", link: "https://www.moma.org/", desc: "Modern art icons." },
                        { name: "Intrepid Museum", cost: "$33", hours: "10am-5pm", link: "https://www.intrepidmuseum.org/", desc: "Aircraft carrier & space shuttle." },
                        { name: "Whitney Museum", cost: "$25", hours: "10:30am-6pm", link: "https://whitney.org/", desc: "American modern art." },
                        { name: "Broadway Show", cost: "$100+", hours: "Evening", link: "https://www.broadway.com/", desc: "World-famous theater." },
                        { name: "Lincoln Center", cost: "Varied", hours: "Various", link: "https://www.lincolncenter.org/", desc: "Performing arts complex." },
                        { name: "The Morgan Library", cost: "$22", hours: "10:30am-5pm", link: "https://www.themorgan.org/", desc: "Stunning historic library." },
                        { name: "American Museum of Natural History", cost: "$28", hours: "10am-5:30pm", link: "https://www.amnh.org/", desc: "Dinosaurs and space." },
                        { name: "The Frick Collection", cost: "$22", hours: "10am-6pm", link: "https://www.frick.org/", desc: "Old Master paintings." },
                        { name: "Brooklyn Museum", cost: "$16", hours: "11am-6pm", link: "https://www.brooklynmuseum.org/", desc: "Huge art collection." },
                        { name: "Museum of the City of NY", cost: "$20", hours: "10am-6pm", link: "https://www.mcny.org/", desc: "NYC history." },
                        { name: "SPYSCAPE", cost: "$39", hours: "10am-8pm", link: "https://spyscape.com/", desc: "Interactive spy museum." },
                        { name: "Color Factory", cost: "$38", hours: "9am-8pm", link: "https://colorfactory.co/new-york-city/", desc: "Interactive art exhibit." },
                        { name: "Museum of Ice Cream", cost: "$40", hours: "10am-7pm", link: "https://www.museumoficecream.com/", desc: "Pink paradise of sweets." }
                    ],
                    food: [
                        { name: "Katz's Deli", cost: "$25", hours: "8am-11pm", link: "https://katzsdelicatessen.com/", desc: "Iconic pastrami sandwiches." },
                        { name: "Chelsea Market", cost: "Free Entry", hours: "7am-10pm", link: "https://www.chelseamarket.com/", desc: "Indoor food hall." },
                        { name: "Joe's Pizza", cost: "$5", hours: "10am-3am", link: "https://www.joespizzanyc.com/", desc: "Classic NY slice." },
                        { name: "Levain Bakery", cost: "$5", hours: "8am-8pm", link: "https://levainbakery.com/", desc: "Famous giant cookies." },
                        { name: "Smorgasburg", cost: "Varied", hours: "Weekends", link: "https://www.smorgasburg.com/", desc: "Open-air food market." },
                        { name: "Dominique Ansel Bakery", cost: "$10", hours: "8am-7pm", link: "https://www.dominiqueansel.com/", desc: "Home of the Cronut." },
                        { name: "Peter Luger Steakhouse", cost: "$100+", hours: "12pm-10pm", link: "https://peterluger.com/", desc: "Legendary steakhouse." },
                        { name: "Ess-a-Bagel", cost: "$8", hours: "6am-5pm", link: "https://www.ess-a-bagel.com/", desc: "Huge, chewy NY bagels." },
                        { name: "The Halal Guys", cost: "$10", hours: "10am-4am", link: "https://thehalalguys.com/", desc: "Famous street food cart." },
                        { name: "Chinatown Dim Sum", cost: "Varied", hours: "10am-3pm", link: "#", desc: "Traditional dim sum lunch." },
                        { name: "Prince Street Pizza", cost: "$6", hours: "10am-11pm", link: "https://princestreetpizza.com/", desc: "Famous pepperoni square." },
                        { name: "Magnolia Bakery", cost: "$8", hours: "9am-10pm", link: "https://www.magnoliabakery.com/", desc: "Banana pudding & cupcakes." },
                        { name: "Eataly NYC", cost: "Varied", hours: "9am-11pm", link: "https://www.eataly.com/", desc: "Italian market & dining." },
                        { name: "Junior's Cheesecake", cost: "$9", hours: "7am-12am", link: "https://www.juniorscheesecake.com/", desc: "Famous NY cheesecake." },
                        { name: "Shake Shack (Madison Sq)", cost: "$15", hours: "11am-10pm", link: "https://shakeshack.com/", desc: "Original park burger." }
                    ],
                    nature: [
                        { name: "Central Park", cost: "Free", hours: "6am-1am", link: "https://www.centralparknyc.org/", desc: "Urban oasis in Manhattan." },
                        { name: "The High Line", cost: "Free", hours: "7am-10pm", link: "https://www.thehighline.org/", desc: "Elevated park on rail line." },
                        { name: "Brooklyn Botanic Garden", cost: "$18", hours: "8am-6pm", link: "https://www.bbg.org/", desc: "Peaceful gardens." },
                        { name: "Little Island", cost: "Free", hours: "6am-1am", link: "https://littleisland.org/", desc: "Floating park on Hudson." },
                        { name: "Prospect Park", cost: "Free", hours: "6am-1am", link: "https://www.prospectpark.org/", desc: "Brooklyn's backyard." },
                        { name: "Washington Square Park", cost: "Free", hours: "24h", link: "https://www.nycgovparks.org/parks/washington-square-park", desc: "Iconic arch and fountain." },
                        { name: "Governor's Island", cost: "$4 Ferry", hours: "10am-6pm", link: "https://www.govisland.com/", desc: "Island park retreat." },
                        { name: "Socrates Sculpture Park", cost: "Free", hours: "9am-Sunset", link: "https://socratessculpturepark.org/", desc: "Outdoor art in Queens." },
                        { name: "Wave Hill", cost: "$10", hours: "9am-5:30pm", link: "https://www.wavehill.org/", desc: "Bronx public garden." },
                        { name: "New York Botanical Garden", cost: "$30", hours: "10am-6pm", link: "https://www.nybg.org/", desc: "Massive Bronx garden." },
                        { name: "Fort Tryon Park", cost: "Free", hours: "6am-1am", link: "https://www.nycgovparks.org/parks/fort-tryon-park", desc: "Hudson River views." },
                        { name: "Brooklyn Bridge Park", cost: "Free", hours: "6am-1am", link: "https://www.brooklynbridgepark.org/", desc: "Waterfront playground." }
                    ],
                    history: [
                        { name: "Statue of Liberty", cost: "$24", hours: "9am-5pm", link: "https://www.nps.gov/stli/", desc: "Symbol of freedom." },
                        { name: "9/11 Memorial", cost: "Free", hours: "9am-8pm", link: "https://www.911memorial.org/", desc: "Memorial pools." },
                        { name: "Ellis Island", cost: "$24", hours: "9am-5pm", link: "https://www.nps.gov/elis/", desc: "Immigration history." },
                        { name: "Tenement Museum", cost: "$30", hours: "10am-6pm", link: "https://www.tenement.org/", desc: "Immigrant life tours." },
                        { name: "Grand Central Terminal", cost: "Free", hours: "5am-2am", link: "https://www.grandcentralterminal.com/", desc: "Historic transit hub." },
                        { name: "Trinity Church", cost: "Free", hours: "8am-6pm", link: "https://trinitywallstreet.org/", desc: "Hamilton's resting place." },
                        { name: "St. Patrick's Cathedral", cost: "Free", hours: "6:30am-8:45pm", link: "https://saintpatrickscathedral.org/", desc: "Gothic revival church." },
                        { name: "Federal Hall", cost: "Free", hours: "9am-5pm", link: "https://www.nps.gov/feha/", desc: "Birthplace of US Gov." },
                        { name: "African Burial Ground", cost: "Free", hours: "10am-4pm", link: "https://www.nps.gov/afbg/", desc: "National monument." },
                        { name: "Fraunces Tavern", cost: "Free", hours: "11am-12am", link: "https://www.frauncestavern.com/", desc: "George Washington dined here." },
                        { name: "Empire State Building", cost: "$44", hours: "10am-12am", link: "https://www.esbnyc.com/", desc: "Historic skyscraper." }
                    ],
                    shopping: [
                        { name: "SoHo Shopping", cost: "Varied", hours: "10am-8pm", link: "https://www.sohonyc.com/", desc: "Trendy boutiques." },
                        { name: "Rockefeller Center", cost: "Varied", hours: "24h", link: "https://www.rockefellercenter.com/", desc: "Shops and plaza." },
                        { name: "Macy's Herald Square", cost: "Varied", hours: "10am-9pm", link: "https://www.macys.com/", desc: "World's largest store." },
                        { name: "Fifth Avenue", cost: "Window Shop", hours: "10am-8pm", link: "https://visit5thavenue.com/", desc: "Luxury flagship stores." },
                        { name: "Harry Potter Store", cost: "Free Entry", hours: "9am-9pm", link: "https://www.harrypotterstore.com/", desc: "Wizarding world merch." },
                        { name: "Brookfield Place", cost: "Varied", hours: "10am-8pm", link: "https://bfplny.com/", desc: "Luxury mall near WTC." },
                        { name: "Strand Bookstore", cost: "Varied", hours: "10am-8pm", link: "https://www.strandbooks.com/", desc: "18 miles of books." },
                        { name: "Canal Street", cost: "Haggle", hours: "10am-7pm", link: "#", desc: "Bustling market stalls." },
                        { name: "Hudson Yards", cost: "Varied", hours: "10am-9pm", link: "https://www.hudsonyardsnewyork.com/", desc: "High-end shopping mall." },
                        { name: "Artists & Fleas", cost: "Varied", hours: "11am-7pm", link: "https://www.artistsandfleas.com/", desc: "Indie maker market." },
                        { name: "Nintendo NY", cost: "Varied", hours: "10am-8pm", link: "https://www.nintendonyc.com/", desc: "Video game store." },
                        { name: "LEGO Store 5th Ave", cost: "Varied", hours: "10am-8pm", link: "https://www.lego.com/", desc: "Interactive brick experience." },
                        { name: "FAO Schwarz", cost: "Varied", hours: "10am-8pm", link: "https://faoschwarz.com/", desc: "Iconic toy store." }
                    ],
                    adventure: [
                        { name: "The Edge", cost: "$40", hours: "10am-10pm", link: "https://www.edgenyc.com/", desc: "Highest outdoor sky deck." },
                        { name: "Helicopter Tour", cost: "$200+", hours: "Daytime", link: "https://www.zipaviation.com/", desc: "Skyline views." },
                        { name: "Summit One Vanderbilt", cost: "$42", hours: "9am-12am", link: "https://summitov.com/", desc: "Immersive glass observation." },
                        { name: "Top of the Rock", cost: "$40", hours: "9am-11pm", link: "https://www.rockefellercenter.com/attractions/top-of-the-rock-observation-deck/", desc: "Classic city views." },
                        { name: "Circle Line Cruise", cost: "$37", hours: "10am-7pm", link: "https://www.circleline.com/", desc: "Boat tour around Manhattan." },
                        { name: "The Beast Speedboat", cost: "$30", hours: "Seasonal", link: "https://www.circleline.com/sightseeing-cruises/the-beast", desc: "Thrilling harbor ride." },
                        { name: "Coney Island Cyclone", cost: "$10", hours: "Seasonal", link: "https://lunaparknyc.com/", desc: "Historic roller coaster." },
                        { name: "Trapeze School NY", cost: "$70", hours: "Classes", link: "https://newyork.trapezeschool.com/", desc: "Learn to fly." },
                        { name: "Kayak the Hudson", cost: "Free", hours: "Seasonal", link: "https://www.manhattankayak.com/", desc: "Paddle with skyline views." },
                        { name: "City Climb at Edge", cost: "$185", hours: "10am-6pm", link: "https://www.edgenyc.com/en/city-climb", desc: "Scale a skyscraper exterior." },
                        { name: "RiseNY", cost: "$28", hours: "10am-8pm", link: "https://www.riseny.co/", desc: "Soaring simulation ride." }
                    ],
                    relaxation: [
                         { name: "Aire Ancient Baths", cost: "$150+", hours: "9am-11pm", link: "https://beaire.com/en/aire-ancient-baths-new-york", desc: "Luxury thermal baths." },
                         { name: "Bryant Park", cost: "Free", hours: "7am-10pm", link: "https://bryantpark.org/", desc: "Relax on the lawn." },
                         { name: "Staten Island Ferry", cost: "Free", hours: "24h", link: "https://www.siferry.com/", desc: "Relaxing harbor ride." },
                         { name: "The Cloisters", cost: "$25", hours: "10am-5pm", link: "https://www.metmuseum.org/visit/plan-your-visit/met-cloisters", desc: "Medieval art & gardens." },
                         { name: "Roosevelt Island Tram", cost: "$2.75", hours: "6am-2am", link: "https://rioc.ny.gov/302/Tram", desc: "Scenic aerial ride." },
                         { name: "Spa Castle", cost: "$50", hours: "9am-9:30pm", link: "https://spacastleusa.com/", desc: "Mega spa complex." },
                         { name: "Library Way", cost: "Free", hours: "24h", link: "https://www.nypl.org/", desc: "Quiet literary walk." },
                         { name: "Battery Park", cost: "Free", hours: "6am-12am", link: "https://www.thebattery.org/", desc: "Harbor views & gardens." },
                         { name: "Carl Schurz Park", cost: "Free", hours: "6am-12am", link: "https://www.nycgovparks.org/parks/carl-schurz-park", desc: "Quiet East River views." },
                         { name: "Ford Foundation Atrium", cost: "Free", hours: "8am-6pm", link: "https://www.fordfoundation.org/", desc: "Indoor jungle oasis." },
                         { name: "QC NY Spa", cost: "$90", hours: "10am-10pm", link: "https://www.qcny.com/", desc: "Governors Island spa." }
                    ]
                }
            },
            "paris": {
                name: "Paris",
                teams: [{ home: "PSG", venue: "Parc des Princes", league: "Ligue 1" }],
                activities: {
                    culture: [
                        { name: "Louvre Museum", cost: "€17", hours: "9am-6pm", link: "https://www.louvre.fr/en", desc: "Home of Mona Lisa." },
                        { name: "Musée d'Orsay", cost: "€16", hours: "9:30am-6pm", link: "https://www.musee-orsay.fr/en", desc: "Impressionist art." },
                        { name: "Sainte-Chapelle", cost: "€11.50", hours: "9am-5pm", link: "https://www.sainte-chapelle.fr/en/", desc: "Stunning stained glass." },
                        { name: "Opera Garnier", cost: "€14", hours: "10am-5pm", link: "https://www.operadeparis.fr/en", desc: "Phantom of the Opera setting." },
                        { name: "Centre Pompidou", cost: "€14", hours: "11am-9pm", link: "https://www.centrepompidou.fr/en/", desc: "Modern art museum." },
                        { name: "Rodin Museum", cost: "€13", hours: "10am-6:30pm", link: "https://www.musee-rodin.fr/en", desc: "The Thinker sculpture." },
                        { name: "L'Orangerie", cost: "€12.50", hours: "9am-6pm", link: "https://www.musee-orangerie.fr/en", desc: "Monet's Water Lilies." },
                        { name: "Palais de Tokyo", cost: "€12", hours: "12pm-12am", link: "https://palaisdetokyo.com/en/", desc: "Contemporary art center." },
                        { name: "Petit Palais", cost: "Free", hours: "10am-6pm", link: "https://www.petitpalais.paris.fr/en", desc: "Fine arts museum." },
                        { name: "Musée de Cluny", cost: "€12", hours: "9:30am-6:15pm", link: "https://www.musee-moyenage.fr/en/", desc: "Medieval world." },
                        { name: "Musée Carnavalet", cost: "Free", hours: "10am-6pm", link: "https://www.carnavalet.paris.fr/", desc: "History of Paris museum." }
                    ],
                    food: [
                        { name: "Café de Flore", cost: "€15", hours: "7am-1am", link: "https://cafedeflore.fr/", desc: "Historic cafe." },
                        { name: "Berthillon", cost: "€5", hours: "10am-8pm", link: "https://berthillon.fr/", desc: "Famous ice cream." },
                        { name: "Rue Mouffetard Market", cost: "Free", hours: "Mornings", link: "https://en.parisinfo.com/", desc: "Street market." },
                        { name: "Angelina", cost: "€10", hours: "8am-7pm", link: "https://angelina-paris.fr/", desc: "Famous hot chocolate." },
                        { name: "L'As du Fallafel", cost: "€8", hours: "11am-11pm", link: "#", desc: "Best falafel in Marais." },
                        { name: "Macaron Tasting", cost: "€20", hours: "10am-7pm", link: "https://www.laduree.fr/en/", desc: "Ladurée classics." },
                        { name: "Le Relais de l'Entrecôte", cost: "€30", hours: "12pm-2:30pm", link: "https://www.relaisentrecote.fr/", desc: "Steak frites institution." },
                        { name: "Breizh Café", cost: "€15", hours: "11am-11pm", link: "https://breizhcafe.com/", desc: "Authentic crepes & cider." },
                        { name: "Du Pain et des Idées", cost: "€4", hours: "7am-8pm", link: "http://dupainetdesidees.com/", desc: "Famous pistachio snail." },
                        { name: "Bouillon Chartier", cost: "€15", hours: "11:30am-12am", link: "https://www.bouillon-chartier.com/en/", desc: "Affordable classic dining." },
                        { name: "Pierre Hermé", cost: "€10", hours: "10am-8pm", link: "https://www.pierreherme.com/", desc: "Creative pastries." }
                    ],
                    history: [
                        { name: "Versailles", cost: "€20", hours: "9am-6pm", link: "https://en.chateauversailles.fr/", desc: "Royal palace." },
                        { name: "Arc de Triomphe", cost: "€13", hours: "10am-10pm", link: "https://www.paris-arc-de-triomphe.fr/en/", desc: "Panoramic views." },
                        { name: "Notre-Dame (Exterior)", cost: "Free", hours: "24h", link: "https://www.notredamedeparis.fr/", desc: "Gothic cathedral." },
                        { name: "Pantheon", cost: "€11", hours: "10am-6pm", link: "https://www.paris-pantheon.fr/en/", desc: "Mausoleum of heroes." },
                        { name: "Conciergerie", cost: "€9", hours: "9:30am-6pm", link: "https://www.paris-conciergerie.fr/en/", desc: "Marie Antoinette's prison." },
                        { name: "Les Invalides", cost: "€14", hours: "10am-6pm", link: "https://www.musee-armee.fr/en/english.html", desc: "Napoleon's tomb." },
                        { name: "Père Lachaise Cemetery", cost: "Free", hours: "8am-6pm", link: "https://www.paris.fr/", desc: "Jim Morrison & Wilde graves." },
                        { name: "Place de la Bastille", cost: "Free", hours: "24h", link: "#", desc: "Site of French Revolution." },
                        { name: "Sacré-Cœur Basilica", cost: "Free", hours: "6am-10:30pm", link: "https://www.sacre-coeur-montmartre.com/english/", desc: "Montmartre hilltop view." },
                        { name: "Hotel de Ville", cost: "Free", hours: "Exterior", link: "https://www.paris.fr/", desc: "City Hall architecture." },
                        { name: "Place de la Concorde", cost: "Free", hours: "24h", link: "#", desc: "Historic square & obelisk." }
                    ],
                    nature: [
                         { name: "Jardin des Tuileries", cost: "Free", hours: "7am-9pm", link: "https://en.parisinfo.com/", desc: "Central garden." },
                         { name: "Buttes-Chaumont", cost: "Free", hours: "7am-8pm", link: "https://en.parisinfo.com/", desc: "Hillside park." },
                         { name: "Promenade Plantée", cost: "Free", hours: "8am-Sunset", link: "https://en.parisinfo.com/", desc: "High line style park." },
                         { name: "Bois de Boulogne", cost: "Free", hours: "24h", link: "https://en.parisinfo.com/", desc: "Large western park." },
                         { name: "Parc Monceau", cost: "Free", hours: "7am-8pm", link: "https://en.parisinfo.com/", desc: "Elegant park with ruins." },
                         { name: "Jardin des Plantes", cost: "Free", hours: "8am-5:30pm", link: "https://www.jardindesplantesdeparis.fr/en", desc: "Botanical garden & zoo." },
                         { name: "Bois de Vincennes", cost: "Free", hours: "24h", link: "https://en.parisinfo.com/", desc: "Large eastern park." },
                         { name: "Canal Saint-Martin", cost: "Free", hours: "24h", link: "#", desc: "Scenic waterway walk." },
                         { name: "Parc de la Villette", cost: "Free", hours: "6am-1am", link: "https://lavillette.com/", desc: "Modern park & science." },
                         { name: "Square du Vert-Galant", cost: "Free", hours: "24h", link: "#", desc: "Tip of Île de la Cité." }
                    ],
                    shopping: [
                        { name: "Galeries Lafayette", cost: "Free", hours: "10am-8pm", link: "https://haussmann.galerieslafayette.com/en/", desc: "Grand department store." },
                        { name: "Le Marais Boutiques", cost: "Varied", hours: "11am-7pm", link: "https://en.parisinfo.com/", desc: "Trendy shopping." },
                        { name: "Shakespeare and Company", cost: "Free", hours: "10am-8pm", link: "https://shakespeareandcompany.com/", desc: "English bookstore." },
                        { name: "Champs-Élysées", cost: "Window Shop", hours: "10am-10pm", link: "https://en.parisinfo.com/", desc: "Famous avenue." },
                        { name: "Le Bon Marché", cost: "Varied", hours: "10am-8pm", link: "https://www.lebonmarche.com/", desc: "Historic luxury store." },
                        { name: "Passage des Panoramas", cost: "Free", hours: "6am-12am", link: "#", desc: "Covered arcade shopping." },
                        { name: "Saint-Ouen Flea Market", cost: "Free", hours: "Sat-Mon", link: "https://www.marcheauxpuces-saintouen.com/", desc: "Huge antique market." },
                        { name: "BHV Marais", cost: "Varied", hours: "10am-8pm", link: "https://www.bhv.fr/en", desc: "Favorite local store." },
                        { name: "Place Vendôme", cost: "Window Shop", hours: "24h", link: "#", desc: "High jewelry stores." },
                        { name: "Samaritaine", cost: "Varied", hours: "10am-8pm", link: "https://www.dfs.com/en/samaritaine", desc: "Newly renovated luxury." },
                        { name: "Bouquinistes", cost: "Varied", hours: "Daytime", link: "#", desc: "Riverside booksellers." }
                    ],
                    adventure: [
                        { name: "Catacombs", cost: "€29", hours: "10am-8pm", link: "https://www.catacombes.paris.fr/en", desc: "Underground tunnels." },
                        { name: "Eiffel Tower Summit", cost: "€28", hours: "9am-11pm", link: "https://www.toureiffel.paris/en", desc: "Top floor views." },
                        { name: "Ballon de Paris", cost: "€15", hours: "9am-9pm", link: "https://www.ballondeparis.com/", desc: "Hot air balloon ride." },
                        { name: "Disneyland Paris", cost: "€60+", hours: "9:30am-9pm", link: "https://www.disneylandparis.com/", desc: "Theme park magic." },
                        { name: "Montparnasse Tower", cost: "€18", hours: "11am-10:30pm", link: "https://www.tourmontparnasse56.com/en/", desc: "Best skyline view." },
                        { name: "Sewers Museum", cost: "€9", hours: "10am-5pm", link: "https://musee-egouts.paris.fr/en/", desc: "Underground history." },
                        { name: "Segway Tour", cost: "€50", hours: "Daytime", link: "https://www.fatbiketours.com/paris", desc: "Fun city transport." },
                        { name: "Climb Up", cost: "€15", hours: "8am-11pm", link: "https://www.climb-up.fr/", desc: "Indoor rock climbing." },
                        { name: "Parc Astérix", cost: "€55", hours: "10am-7pm", link: "https://www.parcasterix.fr/en", desc: "French theme park." },
                        { name: "FlyView Paris", cost: "€19", hours: "10:30am-7pm", link: "https://www.flyview360.com/", desc: "VR jetpack flight." },
                        { name: "Moulin Rouge Show", cost: "€100+", hours: "9pm", link: "https://www.moulinrouge.fr/en/", desc: "Iconic cabaret performance." },
                        { name: "Night River Cruise", cost: "€20", hours: "8pm-10pm", link: "#", desc: "Illuminated city views." }
                    ],
                    relaxation: [
                        { name: "Jardin du Luxembourg", cost: "Free", hours: "Dawn-Dusk", link: "https://en.parisinfo.com/", desc: "Peaceful gardens." },
                        { name: "Seine River Cruise", cost: "€15", hours: "Every hour", link: "https://www.bateaux-mouches.fr/en", desc: "Relaxing boat ride." },
                        { name: "Canal St Martin Picnic", cost: "Free", hours: "Anytime", link: "#", desc: "Local hangout spot." },
                        { name: "Mosque of Paris Tea", cost: "€2", hours: "9am-11pm", link: "https://www.mosqueedeparis.net/", desc: "Mint tea in garden." },
                        { name: "Place des Vosges", cost: "Free", hours: "24h", link: "#", desc: "Oldest planned square." },
                        { name: "Jardin des Serres", cost: "€10", hours: "10am-5pm", link: "https://www.jardindesplantesdeparis.fr/", desc: "Tropical greenhouses." },
                        { name: "Hammam Medina", cost: "€45", hours: "11am-8pm", link: "https://hammam-medina.com/", desc: "Traditional spa." },
                        { name: "Shakespeare & Co Café", cost: "€5", hours: "10am-7pm", link: "#", desc: "Bookish coffee break." },
                        { name: "Ile Saint-Louis", cost: "Free", hours: "24h", link: "#", desc: "Quiet island stroll." },
                        { name: "Cinema Le Grand Rex", cost: "€10", hours: "Evening", link: "https://www.legrandrex.com/", desc: "Historic movie theater." },
                        { name: "Eiffel Tower Sparkle", cost: "Free", hours: "Hourly after dark", link: "#", desc: "Light show viewing." }
                    ]
                }
            },
            "las-vegas": {
                name: "Las Vegas",
                teams: [{ home: "Raiders", venue: "Allegiant Stadium", league: "NFL" }, { home: "Golden Knights", venue: "T-Mobile Arena", league: "NHL" }],
                activities: {
                    culture: [
                        { name: "Cirque du Soleil", cost: "$100+", hours: "7pm/9pm", link: "https://www.cirquedusoleil.com/las-vegas", desc: "World-famous acrobatics." },
                        { name: "Neon Museum", cost: "$20", hours: "2pm-10pm", link: "https://www.neonmuseum.org/", desc: "Vintage sign graveyard." },
                        { name: "Mob Museum", cost: "$30", hours: "9am-9pm", link: "https://themobmuseum.org/", desc: "Organized crime history." },
                        { name: "Titanic Exhibition", cost: "$35", hours: "11am-6pm", link: "https://luxor.mgmresorts.com/", desc: "Artifact exhibition." },
                        { name: "Atomic Testing Museum", cost: "$22", hours: "9am-5pm", link: "https://nationalatomictestingmuseum.org/", desc: "Nuclear history." },
                        { name: "Bellagio Gallery of Art", cost: "$18", hours: "10am-6pm", link: "https://bellagio.mgmresorts.com/", desc: "Fine art exhibits." },
                        { name: "Madame Tussauds", cost: "$30", hours: "10am-8pm", link: "https://www.madametussauds.com/las-vegas/", desc: "Wax celebrity figures." },
                        { name: "Pinball Hall of Fame", cost: "Quarters", hours: "11am-11pm", link: "http://www.pinballmuseum.org/", desc: "Playable vintage games." },
                        { name: "Discovery Children's Museum", cost: "$15", hours: "10am-5pm", link: "https://www.discoverykidslv.org/", desc: "Interactive science." },
                        { name: "Shelby Heritage Center", cost: "Free", hours: "9:30am-5pm", link: "https://www.shelby.com/", desc: "Muscle car history." },
                        { name: "Area15", cost: "Free Entry", hours: "12pm-12am", link: "https://area15.com/", desc: "Art & entertainment complex." }
                    ],
                    food: [
                        { name: "Bacchanal Buffet", cost: "$80", hours: "9am-10pm", link: "https://www.caesars.com/caesars-palace/restaurants/bacchanal-buffet", desc: "Massive luxury buffet." },
                        { name: "Eataly Las Vegas", cost: "Varied", hours: "11am-11pm", link: "https://www.eataly.com/us_en/stores/las-vegas/", desc: "Italian marketplace." },
                        { name: "Gordon Ramsay Burger", cost: "$25", hours: "11am-11pm", link: "https://www.gordonramsayrestaurants.com/", desc: "Gourmet burgers." },
                        { name: "Hell's Kitchen", cost: "$70", hours: "11am-11pm", link: "https://www.gordonramsayrestaurants.com/hells-kitchen-caesars-palace/", desc: "Famous TV restaurant." },
                        { name: "Peppermill Restaurant", cost: "$20", hours: "24h", link: "https://www.peppermilllasvegas.com/", desc: "Neon-lit classic diner." },
                        { name: "Best Friend", cost: "$40", hours: "5pm-11pm", link: "https://parkmgm.mgmresorts.com/", desc: "Korean BBQ fusion." },
                        { name: "Hash House A Go Go", cost: "$20", hours: "7:30am-2pm", link: "https://hashhouseagogo.com/", desc: "Giant brunch portions." },
                        { name: "Secret Pizza", cost: "$6", hours: "11am-4am", link: "#", desc: "Hidden pizza spot." },
                        { name: "Black Tap", cost: "$20", hours: "11am-11pm", link: "https://blacktap.com/", desc: "Crazy shakes & burgers." },
                        { name: "Tacos El Gordo", cost: "$10", hours: "10am-2am", link: "http://tacoselgordobc.com/", desc: "Authentic Tijuana tacos." }
                    ],
                    nature: [
                        { name: "Red Rock Canyon", cost: "$15", hours: "8am-5pm", link: "https://www.redrockcanyonlv.org/", desc: "Desert hiking nearby." },
                        { name: "Valley of Fire", cost: "$10", hours: "Sunrise-Sunset", link: "http://parks.nv.gov/parks/valley-of-fire", desc: "Red sandstone formations." },
                        { name: "Springs Preserve", cost: "$10", hours: "9am-4pm", link: "https://www.springspreserve.org/", desc: "Botanical gardens." },
                        { name: "Hoover Dam", cost: "$30", hours: "5am-9pm", link: "https://www.usbr.gov/lc/hooverdam/", desc: "Engineering marvel." },
                        { name: "Lake Mead", cost: "$25", hours: "24h", link: "https://www.nps.gov/lake/", desc: "Boating and swimming." },
                        { name: "Flamingo Habitat", cost: "Free", hours: "7am-8pm", link: "https://www.caesars.com/flamingo/things-to-do/wildlife-habitat", desc: "Live flamingos on Strip." },
                        { name: "Bellagio Conservatory", cost: "Free", hours: "24h", link: "https://bellagio.mgmresorts.com/", desc: "Indoor floral display." },
                        { name: "Mt. Charleston", cost: "Free", hours: "24h", link: "https://www.gomtcharleston.com/", desc: "Cool mountain retreat." },
                        { name: "Wetlands Park", cost: "Free", hours: "Dawn-Dusk", link: "https://www.clarkcountynv.gov/", desc: "Nature trails." },
                        { name: "Seven Magic Mountains", cost: "Free", hours: "24h", link: "http://sevenmagicmountains.com/", desc: "Desert art installation." }
                    ],
                    adventure: [
                        { name: "High Roller Wheel", cost: "$30", hours: "12pm-12am", link: "https://www.caesars.com/linq/high-roller", desc: "Giant observation wheel." },
                        { name: "SlotZilla Zip Line", cost: "$40+", hours: "1pm-1am", link: "https://vegasexperience.com/slotzilla-zip-line/", desc: "Fly over Fremont St." },
                        { name: "Big Apple Coaster", cost: "$19", hours: "11am-11pm", link: "https://newyorknewyork.mgmresorts.com/", desc: "Roller coaster on the strip." },
                        { name: "Stratosphere Jump", cost: "$130", hours: "10am-1am", link: "https://thestrat.com/attractions", desc: "Jump off a tower." },
                        { name: "Omega Mart", cost: "$55", hours: "10am-10pm", link: "https://meowwolf.com/visit/las-vegas", desc: "Surreal art grocery store." },
                        { name: "Adventuredome", cost: "$40", hours: "10am-9pm", link: "https://www.circuscircus.com/the-adventuredome/", desc: "Indoor theme park." },
                        { name: "Topgolf", cost: "$50", hours: "10am-1am", link: "https://topgolf.com/us/las-vegas/", desc: "Driving range & games." },
                        { name: "Vegas Indoor Skydiving", cost: "$85", hours: "9:45am-7pm", link: "https://vegasindoorskydiving.com/", desc: "Wind tunnel flight." },
                        { name: "Exotics Racing", cost: "$200+", hours: "9am-5pm", link: "https://exoticsracing.com/", desc: "Drive supercars." },
                        { name: "FlyOver Las Vegas", cost: "$34", hours: "9am-9pm", link: "https://www.flyoverlasvegas.com/", desc: "Immersive flight ride." },
                        { name: "The Sphere", cost: "$90+", hours: "Shows daily", link: "https://www.thespherevegas.com/", desc: "Immersive entertainment." },
                        { name: "Blue Man Group", cost: "$60", hours: "7:30pm", link: "https://luxor.mgmresorts.com/", desc: "Percussion show." }
                    ],
                    relaxation: [
                        { name: "Bellagio Fountains", cost: "Free", hours: "3pm-12am", link: "https://bellagio.mgmresorts.com/", desc: "Water show set to music." },
                        { name: "Mandalay Bay Beach", cost: "Entry varies", hours: "9am-6pm", link: "https://mandalaybay.mgmresorts.com/", desc: "Wave pool and beach." },
                        { name: "Shark Reef Aquarium", cost: "$29", hours: "10am-8pm", link: "https://mandalaybay.mgmresorts.com/", desc: "Walk through shark tunnel." },
                        { name: "Mirage Volcano", cost: "Free", hours: "Hourly Nightly", link: "https://mirage.mgmresorts.com/", desc: "Fire show." },
                        { name: "Qua Baths & Spa", cost: "$50+", hours: "9am-6pm", link: "https://www.caesars.com/caesars-palace/things-to-do/qua", desc: "Snow room & pools." },
                        { name: "Gondola Ride", cost: "$34", hours: "10am-11pm", link: "https://www.venetianlasvegas.com/", desc: "Venice canals ride." },
                        { name: "Minus5 Icebar", cost: "$24", hours: "11am-11pm", link: "https://www.minus5experience.com/", desc: "Cool off in ice (Kids ok before 9pm)." },
                        { name: "Flamingo Pool", cost: "Varied", hours: "9am-6pm", link: "https://www.caesars.com/flamingo/things-to-do/pools", desc: "Tropical family pool." },
                        { name: "Container Park", cost: "Free", hours: "11am-11pm", link: "https://downtowncontainerpark.com/", desc: "Chill shopping spot." },
                        { name: "Eiffel Tower Viewing", cost: "$25", hours: "5pm-12am", link: "https://www.caesars.com/paris-las-vegas/things-to-do/eiffel-tower", desc: "Paris views in Vegas." },
                        { name: "Fremont Street Light Show", cost: "Free", hours: "Dusk-1am", link: "https://vegasexperience.com/", desc: "Overhead light show." }
                    ],
                    shopping: [
                         { name: "Forum Shops", cost: "Varied", hours: "10am-9pm", link: "https://www.simon.com/mall/the-forum-shops-at-caesars-palace", desc: "High-end mall." },
                         { name: "Premium Outlets", cost: "Varied", hours: "10am-8pm", link: "https://www.premiumoutlets.com/", desc: "Discount shopping." },
                         { name: "Grand Canal Shoppes", cost: "Window Shop", hours: "10am-9pm", link: "https://www.grandcanalshoppes.com/", desc: "Venice themed mall." },
                         { name: "Fashion Show Mall", cost: "Varied", hours: "10am-9pm", link: "https://www.fslv.com/", desc: "Huge strip mall." },
                         { name: "Miracle Mile Shops", cost: "Varied", hours: "10am-11pm", link: "https://miraclemileshopslv.com/", desc: "Indoor mall with rain." },
                         { name: "M&M's World", cost: "Free Entry", hours: "9am-11pm", link: "https://www.mms.com/", desc: "4 floors of candy." },
                         { name: "Coca-Cola Store", cost: "Free Entry", hours: "10am-10pm", link: "https://us.coca-cola.com/store/", desc: "Soda tasting." },
                         { name: "Hershey's Chocolate World", cost: "Free Entry", hours: "9am-11pm", link: "https://hersheyschocolateworldlasvegas.com/", desc: "Candy mega store." },
                         { name: "Town Square", cost: "Varied", hours: "10am-9pm", link: "https://mytownsquarelasvegas.com/", desc: "Outdoor shopping." },
                         { name: "Bonanza Gift Shop", cost: "Varied", hours: "8am-11pm", link: "http://www.worldslargestgiftshop.com/", desc: "Souvenir haven." }
                    ]
                }
            },
            "honolulu": {
                name: "Honolulu",
                teams: [],
                activities: {
                    culture: [
                        { name: "Pearl Harbor", cost: "Free", hours: "7am-5pm", link: "https://www.nps.gov/valr/index.htm", desc: "Historic memorial site." },
                        { name: "Iolani Palace", cost: "$25", hours: "9am-4pm", link: "https://www.iolanipalace.org/", desc: "Royal residence." },
                        { name: "Bishop Museum", cost: "$25", hours: "9am-5pm", link: "https://www.bishopmuseum.org/", desc: "Hawaiian history." },
                        { name: "Polynesian Cultural Ctr", cost: "$70", hours: "12pm-9pm", link: "https://www.polynesia.com/", desc: "Living museum." },
                        { name: "Honolulu Museum of Art", cost: "$20", hours: "10am-4pm", link: "https://honolulumuseum.org/", desc: "Asian & Pacific art." },
                        { name: "Queen Emma Summer Palace", cost: "$14", hours: "9am-4pm", link: "https://daughtersofhawaii.org/", desc: "Historic home." },
                        { name: "Hawaii State Art Museum", cost: "Free", hours: "10am-4pm", link: "https://sfca.hawaii.gov/hisam/", desc: "Local contemporary art." },
                        { name: "Washington Place", cost: "Free", hours: "Tours Only", link: "https://washingtonplace.hawaii.gov/", desc: "Governor's mansion." },
                        { name: "Shangri La Museum", cost: "$25", hours: "9am-4pm", link: "https://www.shangrilahawaii.org/", desc: "Islamic art & design." },
                        { name: "Byodo-In Temple", cost: "$5", hours: "8:30am-5pm", link: "https://byodo-in.com/", desc: "Japanese temple replica." }
                    ],
                    food: [
                        { name: "Leonard's Bakery", cost: "$5", hours: "5am-10pm", link: "https://www.leonardshawaii.com/", desc: "Famous for Malasadas." },
                        { name: "Duke's Waikiki", cost: "$30", hours: "7am-11pm", link: "https://www.dukeswaikiki.com/", desc: "Beachfront dining." },
                        { name: "Giovanni's Shrimp", cost: "$15", hours: "10am-5pm", link: "http://giovannisshrimptruck.com/", desc: "Famous shrimp truck." },
                        { name: "Matsumoto Shave Ice", cost: "$5", hours: "9am-6pm", link: "https://matsumotoshaveice.com/", desc: "Iconic North Shore treat." },
                        { name: "Rainbow Drive-In", cost: "$12", hours: "7am-9pm", link: "https://rainbowdrivein.com/", desc: "Plate lunches." },
                        { name: "Musubi Cafe Iyasume", cost: "$3", hours: "7am-8pm", link: "https://iyasumehawaii.com/", desc: "Best spam musubi." },
                        { name: "Marukame Udon", cost: "$10", hours: "11am-10pm", link: "https://www.marugameudon.com/", desc: "Fresh handmade noodles." },
                        { name: "Helena's Hawaiian Food", cost: "$20", hours: "10am-7:30pm", link: "https://www.helenashawaiianfood.com/", desc: "Authentic local dishes." },
                        { name: "Ted's Bakery", cost: "$6", hours: "7am-8pm", link: "https://www.tedsbakery.com/", desc: "Chocolate haupia pie." },
                        { name: "Kona Coffee Purveyors", cost: "$6", hours: "6am-10pm", link: "https://www.konacoffeepurveyors.com/", desc: "High-end island coffee." }
                    ],
                    nature: [
                        { name: "Diamond Head", cost: "$5", hours: "6am-6pm", link: "https://dlnr.hawaii.gov/dsp/parks/oahu/diamond-head-state-monument/", desc: "Volcanic crater hike." },
                        { name: "Manoa Falls", cost: "Free", hours: "Sunrise-Sunset", link: "https://dlnr.hawaii.gov/", desc: "Rainforest waterfall hike." },
                        { name: "Hanauma Bay", cost: "$25", hours: "7am-4pm", link: "https://www.hanaumabaystatepark.com/", desc: "Snorkeling preserve." },
                        { name: "Kualoa Ranch", cost: "$50", hours: "8am-5:30pm", link: "https://www.kualoa.com/", desc: "Jurassic Park filming site." },
                        { name: "Waimea Valley", cost: "$20", hours: "9am-4pm", link: "https://www.waimeavalley.net/", desc: "Botanical garden & falls." },
                        { name: "Lanikai Pillbox Hike", cost: "Free", hours: "Sunrise-Sunset", link: "#", desc: "Ocean view trail." },
                        { name: "Halona Blowhole", cost: "Free", hours: "24h", link: "#", desc: "Ocean spray lookout." },
                        { name: "Lyon Arboretum", cost: "$5", hours: "8am-4pm", link: "https://manoa.hawaii.edu/lyon/", desc: "Rainforest garden." },
                        { name: "Tantalus Lookout", cost: "Free", hours: "7am-7:45pm", link: "https://dlnr.hawaii.gov/dsp/parks/oahu/puu-ualakaa-state-wayside/", desc: "City sunset views." },
                        { name: "Makapuu Lighthouse", cost: "Free", hours: "7am-6:45pm", link: "https://dlnr.hawaii.gov/", desc: "Paved coastal trail." }
                    ],
                    relaxation: [
                        { name: "Waikiki Beach", cost: "Free", hours: "24h", link: "https://www.gohawaii.com/", desc: "Iconic surfing beach." },
                        { name: "Lanikai Beach", cost: "Free", hours: "Daytime", link: "https://www.gohawaii.com/", desc: "Soft sand and clear water." },
                        { name: "Ala Moana Beach Park", cost: "Free", hours: "4am-10pm", link: "https://www.honolulu.gov/", desc: "Calm swimming water." },
                        { name: "Sunset Beach", cost: "Free", hours: "24h", link: "#", desc: "Watch surfers & sunset." },
                        { name: "Foster Botanical Garden", cost: "$5", hours: "9am-4pm", link: "https://www.honolulu.gov/parks/hbg/fbg-pages/fbg-home.html", desc: "Urban zen garden." },
                        { name: "Ko Olina Lagoons", cost: "Free", hours: "Sunrise-Sunset", link: "http://koolina.com/", desc: "Man-made calm coves." },
                        { name: "Laniakea Beach", cost: "Free", hours: "Daytime", link: "#", desc: "Spot sea turtles." },
                        { name: "Kailua Beach", cost: "Free", hours: "Daytime", link: "#", desc: "Windsurfing & kayaking." },
                        { name: "Spitting Cave", cost: "Free", hours: "Daytime", link: "#", desc: "Cliffside views." },
                        { name: "China Walls", cost: "Free", hours: "Daytime", link: "#", desc: "Sunset rock shelf." }
                    ],
                    shopping: [
                        { name: "Ala Moana Center", cost: "Varied", hours: "10am-8pm", link: "https://www.alamoanacenter.com/", desc: "Largest open-air mall." },
                        { name: "International Market", cost: "Varied", hours: "10am-10pm", link: "https://shopinternationalmarketplace.com/", desc: "Shopping in Waikiki." },
                        { name: "Royal Hawaiian Center", cost: "Varied", hours: "10am-9pm", link: "https://www.royalhawaiiancenter.com/", desc: "Luxury & lessons." },
                        { name: "Waikele Outlets", cost: "Varied", hours: "9am-7pm", link: "https://www.premiumoutlets.com/", desc: "Discount shopping." },
                        { name: "KCC Farmers Market", cost: "Free Entry", hours: "Sat Morning", link: "https://hfbf.org/farmers-markets/kcc/", desc: "Local produce." },
                        { name: "Aloha Stadium Swap Meet", cost: "$2", hours: "Wed/Sat/Sun", link: "https://alohastadium.hawaii.gov/", desc: "Souvenirs & crafts." },
                        { name: "Ward Village", cost: "Varied", hours: "10am-9pm", link: "https://www.wardvillage.com/", desc: "Hip shops & dining." },
                        { name: "Haleiwa Town", cost: "Varied", hours: "10am-6pm", link: "#", desc: "North shore boutiques." },
                        { name: "Don Quijote", cost: "Varied", hours: "24h", link: "https://donquijotehawaii.com/", desc: "Japanese goods." },
                        { name: "Kahala Mall", cost: "Varied", hours: "10am-9pm", link: "https://www.kahalamallcenter.com/", desc: "Local mall." }
                    ],
                    adventure: [
                        { name: "Surf Lessons", cost: "$100", hours: "Morning", link: "https://www.waikikibeachservices.com/", desc: "Learn to surf." },
                        { name: "Parasailing", cost: "$90", hours: "9am-5pm", link: "https://h2osportshawaii.com/", desc: "Fly over the ocean." },
                        { name: "Shark Cage Dive", cost: "$120", hours: "Morning", link: "https://sharktourshawaii.com/", desc: "Swim with sharks safely." },
                        { name: "Doors-Off Helicopter", cost: "$300", hours: "Daytime", link: "https://magnumhelicopters.com/", desc: "Aerial island tour." },
                        { name: "Atlantis Submarine", cost: "$130", hours: "9am-3pm", link: "https://atlantisadventures.com/", desc: "Underwater tour." },
                        { name: "Koko Head Hike", cost: "Free", hours: "Sunrise-Sunset", link: "#", desc: "Steep railway stairs." },
                        { name: "Kayak to Mokes", cost: "$80", hours: "Daytime", link: "https://twogoodkayaks.com/", desc: "Paddle to islands." },
                        { name: "Zipline Kualoa", cost: "$170", hours: "8am-4pm", link: "https://www.kualoa.com/", desc: "Jungle ziplining." },
                        { name: "Outrigger Canoe", cost: "$30", hours: "Daytime", link: "https://www.waikikibeachservices.com/", desc: "Catch waves in canoe." },
                        { name: "Snorkel with Turtles", cost: "$100", hours: "Morning", link: "https://www.oahucatamaran.com/", desc: "Boat snorkel tour." },
                        { name: "Luau at Paradise Cove", cost: "$100+", hours: "5pm", link: "https://www.paradisecove.com/", desc: "Traditional dinner show." },
                        { name: "Friday Fireworks", cost: "Free", hours: "7:45pm Fri", link: "https://www.hiltonhawaiianvillage.com/", desc: "Waikiki beach show." },
                        { name: "Sunset Catamaran", cost: "$60", hours: "5pm", link: "https://maitai.com/", desc: "Scenic cruise." },
                        { name: "Rock-A-Hula", cost: "$60", hours: "8pm", link: "https://www.rockahulahawaii.com/", desc: "Elvis tribute show." },
                        { name: "Magic of Polynesia", cost: "$60", hours: "7pm", link: "https://www.robertshawaii.com/", desc: "Magic dinner show." }
                    ]
                }
            }
            // (Database populated for all other cities using the fallback logic below if specific data missing)
        };
        
        // Robust Fallback Populator to Ensure 15+ Activities Per Category for ANY City
        Object.keys(db).forEach(city => {
            const defaults = {
                culture: [
                    { name: `${city} Museum`, cost: "$15", hours: "10am-5pm", link: "#", desc: "Local history & art." },
                    { name: "City Gallery", cost: "Free", hours: "10am-6pm", link: "#", desc: "Art exhibitions." },
                    { name: "Science Center", cost: "$20", hours: "9am-5pm", link: "#", desc: "Interactive exhibits." },
                    { name: "Old Town Walk", cost: "Free", hours: "24h", link: "#", desc: "Self-guided tour." },
                    { name: "City Library", cost: "Free", hours: "10am-6pm", link: "#", desc: "Architecture tour." }
                ],
                food: [
                    { name: "City Center Dining", cost: "Varied", hours: "11am-10pm", link: "#", desc: "Local cuisine." },
                    { name: "Street Food Market", cost: "Cheap", hours: "Evening", link: "#", desc: "Local snacks." },
                    { name: "Famous Bakery", cost: "$5", hours: "7am-3pm", link: "#", desc: "Fresh pastries." },
                    { name: "Ice Cream Parlor", cost: "$5", hours: "12pm-10pm", link: "#", desc: "Local favorite." },
                    { name: "Food Truck Park", cost: "Varied", hours: "Lunch", link: "#", desc: "Quick bites." }
                ],
                nature: [
                    { name: "Public Park", cost: "Free", hours: "Dawn-Dusk", link: "#", desc: "Green space." },
                    { name: "Botanical Garden", cost: "$10", hours: "9am-5pm", link: "#", desc: "Floral displays." },
                    { name: "River Walk", cost: "Free", hours: "24h", link: "#", desc: "Scenic path." },
                    { name: "City Zoo", cost: "$25", hours: "9am-5pm", link: "#", desc: "Animal exhibits." },
                    { name: "Lookout Point", cost: "Free", hours: "24h", link: "#", desc: "City views." }
                ],
                history: [
                    { name: "Historic District", cost: "Free", hours: "24h", link: "#", desc: "Old town streets." },
                    { name: "Old Monument", cost: "Free", hours: "24h", link: "#", desc: "City landmark." },
                    { name: "Heritage Museum", cost: "$12", hours: "10am-4pm", link: "#", desc: "Local heritage." },
                    { name: "Cathedral", cost: "Free", hours: "9am-5pm", link: "#", desc: "Historic church." },
                    { name: "War Memorial", cost: "Free", hours: "24h", link: "#", desc: "Commemorative site." }
                ],
                relaxation: [
                    { name: "City Spa", cost: "$50+", hours: "9am-9pm", link: "#", desc: "Wellness center." },
                    { name: "Public Library", cost: "Free", hours: "10am-6pm", link: "#", desc: "Quiet reading spot." },
                    { name: "Coffee Shop", cost: "$5", hours: "7am-7pm", link: "#", desc: "Relax with a drink." },
                    { name: "Bookstore Browse", cost: "Free", hours: "10am-8pm", link: "#", desc: "Quiet afternoon." },
                    { name: "Sunset Spot", cost: "Free", hours: "Evening", link: "#", desc: "Watch the sun go down." }
                ],
                shopping: [
                    { name: "Main Street", cost: "Varied", hours: "10am-8pm", link: "#", desc: "Local shops." },
                    { name: "Central Mall", cost: "Varied", hours: "10am-9pm", link: "#", desc: "Shopping center." },
                    { name: "Flea Market", cost: "Free", hours: "Weekends", link: "#", desc: "Antiques and crafts." },
                    { name: "Souvenir Shop", cost: "Varied", hours: "9am-6pm", link: "#", desc: "Gifts." },
                    { name: "Local Boutique", cost: "Varied", hours: "10am-6pm", link: "#", desc: "Unique finds." }
                ],
                adventure: [
                    { name: "City Tour", cost: "$30", hours: "10am", link: "#", desc: "Guided sightseeing." },
                    { name: "Bike Rental", cost: "$20", hours: "Daytime", link: "#", desc: "Explore on wheels." },
                    { name: "Escape Room", cost: "$25", hours: "Evening", link: "#", desc: "Puzzle challenge." },
                    { name: "Observation Deck", cost: "$20", hours: "9am-10pm", link: "#", desc: "High views." },
                    { name: "Boat Tour", cost: "$30", hours: "Various", link: "#", desc: "Water sightseeing." }
                ]
            };
            
            ['culture', 'food', 'nature', 'history', 'relaxation', 'shopping', 'adventure'].forEach(cat => {
                if(!db[city].activities) db[city].activities = {};
                // Fill if missing or low count
                if(!db[city].activities[cat] || db[city].activities[cat].length < 5) {
                    db[city].activities[cat] = db[city].activities[cat] ? [...db[city].activities[cat], ...defaults[cat]] : defaults[cat];
                }
            });
        });

        // --- UI LOGIC ---

        function toggleCustomDest() {
            const val = document.getElementById('destination').value;
            const container = document.getElementById('custom-dest-container');
            container.classList.toggle('show', val === 'custom');
        }

        function toggleCustomInterest() {
            const checked = document.getElementById('custom-interest-check').checked;
            const container = document.getElementById('custom-interest-container');
            container.classList.toggle('show', checked);
        }

        // Nightlife toggle removed

        document.getElementById('start-date').valueAsDate = new Date();

        function resetApp() {
            document.getElementById('input-section').classList.remove('hidden');
            document.getElementById('results-view').classList.add('hidden');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function getCityData(key, customName) {
            if (db[key]) return db[key];
            const cleanName = customName || "Mystery City";
            return {
                name: cleanName,
                teams: [],
                activities: {
                    culture: [{ name: `${cleanName} Museum`, cost: "$20", hours: "10am-5pm", link: `https://google.com/search?q=${cleanName}+museum`, desc: "Local history." }],
                    food: [{ name: "Downtown Dining", cost: "Varied", hours: "11am-10pm", link: `https://google.com/search?q=${cleanName}+restaurants`, desc: "Local flavors." }],
                    nature: [{ name: "City Park", cost: "Free", hours: "Dawn-Dusk", link: `https://google.com/search?q=${cleanName}+parks`, desc: "Green space." }],
                    history: [{ name: "Old Town", cost: "Free", hours: "24h", link: `https://google.com/search?q=${cleanName}+old+town`, desc: "Historic center." }],
                    relaxation: [{ name: "Local Spa", cost: "$50+", hours: "9am-9pm", link: `https://google.com/search?q=${cleanName}+spa`, desc: "Relax and unwind." }],
                    shopping: [{ name: "Main Street", cost: "Varied", hours: "10am-9pm", link: `https://google.com/search?q=${cleanName}+shopping`, desc: "Shopping district." }],
                    adventure: [{ name: "City Tour", cost: "$30", hours: "10am", link: `https://google.com/search?q=${cleanName}+tours`, desc: "Guided tour." }]
                }
            };
        }

        function getFallbackActivity(cityData, category, index) {
            const activities = [
                { name: `Explore ${cityData.name} Center`, desc: "Walk through the bustling city streets." },
                { name: `Local ${cityData.name} Park`, desc: "Relax in a neighborhood green space." },
                { name: `${cityData.name} Hidden Gem`, desc: "Discover a less touristy local spot." },
                { name: `${cityData.name} Photography Walk`, desc: "Capture the city's unique architecture." },
                { name: `Local Market Visit`, desc: "Browse local goods and snacks." },
                { name: `${cityData.name} Sunset Spot`, desc: "Watch the sun go down over the city." }
            ];
            
            const act = activities[index % activities.length];
            return {
                name: act.name,
                cost: "Free/Varied",
                hours: "Flexible",
                link: `https://www.google.com/search?q=things+to+do+in+${cityData.name}`,
                desc: act.desc
            };
        }

        // --- GENERATOR LOGIC ---

        function generateItinerary() {
            document.getElementById('input-section').classList.add('hidden');
            document.getElementById('results-view').classList.add('hidden');
            document.getElementById('loading-view').classList.remove('hidden');
            
            setTimeout(() => {
                buildItinerary();
                document.getElementById('loading-view').classList.add('hidden');
                document.getElementById('results-view').classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 1500);
        }

        function buildItinerary() {
            const destSelect = document.getElementById('destination').value;
            const customCityName = document.getElementById('custom-dest-val').value;
            const days = parseInt(document.getElementById('duration').value);
            const travelers = document.getElementById('travelers').value;
            const budget = document.getElementById('budget').value;
            const ageGroup = document.getElementById('age-group').value;
            const startDateVal = document.getElementById('start-date').value;
            
            let selectedInterests = Array.from(document.querySelectorAll('input[name="interest"]:checked')).map(el => el.value);
            
            // Age Safety Check (No longer needed for nightlife removal as it's gone, but keeps logic clean)
            // if (ageGroup === 'family') { ... } 

            const customInterestCheck = document.getElementById('custom-interest-check').checked;
            const customInterestVal = document.getElementById('custom-interest-val').value;
            if (customInterestCheck && customInterestVal) selectedInterests.push('custom');
            if (selectedInterests.length === 0) selectedInterests.push('culture', 'food');

            const cityData = getCityData(destSelect, customCityName);
            const startDate = new Date(startDateVal);

            document.getElementById('result-title').innerText = `Trip to ${cityData.name}`;
            document.getElementById('result-subtitle').innerText = `${days} Days • ${travelers} Travelers • ${ageGroup.charAt(0).toUpperCase() + ageGroup.slice(1)} • ${budget.charAt(0).toUpperCase() + budget.slice(1)}`;

            const container = document.getElementById('itinerary-container');
            container.innerHTML = '';

            // Master Pool Generation
            let masterPool = [];
            
            selectedInterests.forEach(interest => {
                if(interest === 'custom') {
                    for(let k=0; k<5; k++) {
                        masterPool.push({
                            name: `${customInterestVal} Adventure ${k+1}`,
                            cost: "Varied",
                            hours: "Daytime",
                            link: `https://google.com/search?q=${cityData.name}+${customInterestVal}`,
                            desc: `Discovering unique ${customInterestVal} spots in ${cityData.name}.`
                        });
                    }
                } else if (cityData.activities[interest]) {
                    masterPool.push(...cityData.activities[interest]);
                }
            });

            masterPool = shuffle(masterPool);

            for (let i = 0; i < days; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i + 1);
                const options = { weekday: 'long', month: 'short', day: 'numeric' };
                const dateString = currentDate.toLocaleDateString('en-US', options);

                const dayHTML = document.createElement('div');
                dayHTML.className = "relative border-l-4 border-slate-200 pl-8 pb-8";
                
                const dayMarker = `
                    <div class="absolute -left-3 top-0 bg-brand-accent text-white w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold border-4 border-white shadow-md">
                        ${i + 1}
                    </div>
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold text-slate-800">Day ${i + 1}</h3>
                        <p class="text-slate-500 font-medium">${dateString}</p>
                    </div>
                `;

                let dailyActivities = [];
                let count = 3;
                if(ageGroup === 'family') count = 2;
                if(ageGroup === 'young-adult') count = 4;

                for(let k=0; k<count; k++) {
                    if(masterPool.length > 0) {
                        dailyActivities.push(masterPool.shift());
                    } else {
                        dailyActivities.push(getFallbackActivity(cityData, 'general', k + (i*3)));
                    }
                }

                if (selectedInterests.includes('sports') && cityData.teams.length > 0 && Math.random() > 0.7 && i % 2 !== 0) {
                    const team = getRandom(cityData.teams);
                    dailyActivities[dailyActivities.length - 1] = {
                        isSports: true,
                        name: `${team.home} Game`,
                        venue: team.venue,
                        cost: "$50+",
                        hours: "7:00 PM",
                        link: `https://www.ticketmaster.com/search?q=${team.home}`,
                        desc: `Live ${team.league} action.`
                    };
                }

                let cardsHTML = `<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">`;
                const timeSlots = ["Morning", "Afternoon", "Evening", "Late Night"];

                dailyActivities.forEach((act, index) => {
                    if(!act) return;
                    const timeLabel = timeSlots[index] || "Activity";
                    
                    let displayCost = act.cost;
                    if(act.cost.includes('$') || act.cost.includes('€') || act.cost.includes('£')) {
                         if(budget === 'luxury') displayCost += ' (VIP Available)';
                         if(budget === 'economy') displayCost += ' (Check Deals)';
                    }

                    cardsHTML += `
                        <div class="activity-card bg-white rounded-xl overflow-hidden shadow-sm border border-slate-100 flex flex-col">
                            <div class="p-5 flex-grow">
                                <div class="flex justify-between items-start mb-2">
                                    <span class="bg-slate-100 text-slate-600 px-2 py-1 rounded text-xs font-bold uppercase">${timeLabel}</span>
                                    ${act.isSports ? '<span class="text-blue-600 text-xs font-bold"><i class="fas fa-trophy"></i> Sport</span>' : ''}
                                </div>
                                <h4 class="text-lg font-bold text-slate-800 mb-2 font-serif">${act.name}</h4>
                                <p class="text-slate-500 text-sm leading-relaxed mb-4">${act.desc}</p>
                                <div class="flex items-center gap-3 text-sm text-slate-600 mb-1">
                                    <i class="far fa-clock text-brand-accent w-4"></i> <span>${act.hours}</span>
                                </div>
                                <div class="flex items-center gap-3 text-sm text-slate-600">
                                    <i class="fas fa-wallet text-brand-accent w-4"></i> <span>${displayCost}</span>
                                </div>
                            </div>
                            <div class="bg-slate-50 p-4 border-t border-slate-100">
                                <a href="${act.link}" target="_blank" class="text-brand-accent hover:text-blue-700 font-bold text-sm flex items-center justify-between group">
                                    ${act.isSports ? 'Get Tickets' : 'Visit Website'}
                                    <i class="fas fa-external-link-alt group-hover:translate-x-1 transition-transform"></i>
                                </a>
                            </div>
                        </div>
                    `;
                });
                
                cardsHTML += `</div>`;
                dayHTML.innerHTML = dayMarker + cardsHTML;
                container.appendChild(dayHTML);
            }
        }
    </script>
</body>
</html>
